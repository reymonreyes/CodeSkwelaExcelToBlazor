@page "/"
@using SimpleServiceInvoice.Data

<PageTitle>Home</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Welcome back!</MudText>
<MudGrid Spacing="10">
    <MudItem md="4">
        <MudPaper Class="pa-5">
            <MudGrid>
                <MudItem md="8">
                    <MudGrid>
                        <MudItem md="12"><MudText><b>TOTAL INVOICES</b></MudText></MudItem>
                        <MudItem md="12"><MudIconButton Href="invoices/0" Icon="@Icons.Material.Filled.Add" Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Large"/></MudItem>
                    </MudGrid>
                </MudItem>
                <MudItem md="4"><MudText Align="Align.Right" Style="font-size: 3em;font-weight: bold;">@_totalInvoices</MudText></MudItem>
            </MudGrid>
        </MudPaper>
    </MudItem>
    <MudItem md="4">
        <MudPaper Class="pa-5">
            <MudGrid>
                <MudItem md="8">
                    <MudGrid>
                        <MudItem md="12"><MudText><b>TOTAL PROVIDERS</b></MudText></MudItem>
                        <MudItem md="12"><MudIconButton Href="providers/create" Icon="@Icons.Material.Filled.Add" Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Large"/></MudItem>
                    </MudGrid>
                </MudItem>
                <MudItem md="4"><MudText Align="Align.Right" Style="font-size: 3em;font-weight: bold;">@_totalProviders</MudText></MudItem>
            </MudGrid>
        </MudPaper>
    </MudItem>
    <MudItem md="4">
        <MudPaper Class="pa-5">
            <MudGrid>
                <MudItem md="8">
                    <MudGrid>
                        <MudItem md="12"><MudText><b>TOTAL CUSTOMERS</b></MudText></MudItem>
                        <MudItem md="12"><MudIconButton Href="customers/create" Icon="@Icons.Material.Filled.Add" Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Large"/></MudItem>
                    </MudGrid>
                </MudItem>
                <MudItem md="4"><MudText Align="Align.Right" Style="font-size: 3em;font-weight: bold;">@_totalCustomers</MudText></MudItem>
            </MudGrid>
        </MudPaper>
    </MudItem>
</MudGrid>

@code{
    int _totalInvoices, _totalProviders, _totalCustomers;

    protected override void OnInitialized()
    {
        using(var context = new ApplicationDbContext())
        {
            _totalInvoices = context.Invoices.Count();
            _totalProviders = context.Providers.Count();
            _totalCustomers = context.Customers.Count();
        }
    }
}